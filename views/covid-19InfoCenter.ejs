<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
	<title>COVID-19 Info Center | Scorona</title>
	<link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400&display=swap" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="css/covid-19InfoCenter.css">
</head>
<body>
	<div class="container">
        <div class="navbar-div">
            <%- include('partials/navbar') %>
        </div>
        <div class="covidInfoCenter-div-container">
			<h1>COVID-19 Information Center</h1>
			<span id="countdown" class="timer"></span>
			<div class="data-container">
				<div class="country-div">
					<h4>Country</h4> 
					<p id="country"></p>
				</div>
				<div class="cases-div">
					<h4>Total Cases</h4>
					<p id="cases"></p>
				</div>
				<div class="new-cases-div">
					<h4>New Cases</h4>
					<p id="newCases"></p>
				</div>
				<div class="deaths-today-div">
					<h4>Deaths Today</h4>
					<p id="deathsToday"></p>
				</div>
				<div class="deaths-div">
					<h4>Total Deaths</h4>
					<p id="deaths"></p>
				</div>
				<div class="recovered-div">
					<h4>Recovered</h4>
					<p id="recovered"></p> 
				</div>
				<div class="active-div">
					<h4>Active</h4>
					<p id="active"></p>
				</div>
				<div class="recovered-div">
					<h4>Recovered</h4>
					<p id="recovered"></p>
				</div>
				<div class="critical-div">
					<h4>Critical</h4>
					<p id="critical"></p>
				</div>
				<div class="tests-div">
					<h4>Total tests</h4>
					<p id="tests"></p>
				</div>
			</div>
			<p class="footer">COVID-19 statistics provided by <a href="https://coronavirus-19-api.herokuapp.com">Covid-19 API</a></h1>
				<div class='info'>
					<h3>What is SARS-CoV-2? What is COVID-19?</h3>
					<p>
						Severe Acute Respiratory Syndrome Coronavirus-2 (SARS-CoV-2) is the name given to the 2019 novel coronavirus. 
						COVID-19 is the name given to the disease associated with the virus. SARS-CoV-2 is a new strain of coronavirus 
						that has not been previously identified in humans.
					</p>
					<h3>Where do coronaviruses come from?</h3>
					<p>
						Coronaviruses are viruses that circulate among animals. Some coronaviruses can infect humans.
						Bats are considered natural hosts of these viruses, and several other species of animals are also known to act as sources. 
						For instance, Middle East Respiratory Syndrome Coronavirus (MERS-CoV) is transmitted to humans from camels, 
						while Severe Acute Respiratory Syndrome Coronavirus-1 (SARS-CoV-1) is transmitted to humans from intermediate hosts such as 
						civet cats which played a role in the emergence of SARS-CoV-1.
					</p>
					<h3>Is this virus comparable with SARS or with the seasonal flu?</h3>
					<p>
						The novel coronavirus detected in China in 2019 is closely related genetically to the SARS-CoV-1 virus. 
						SARS emerged in late 2002 in China and caused more than 8 000 cases in 33 countries over the course of eight months. 
						Around one in 10 people who developed SARS died. In the first eleven months of the COVID-19 pandemic 
						(from 31 December 2019 to 14 December 2020), there were over 71 million cases worldwide and more than 1 600 000 deaths. 
						While the viruses that cause both COVID-19 and seasonal influenza are transmitted from person-to-person in the same way and may cause similar symptoms, the two viruses are different.
						ECDC estimates that between 15 000 and 75 000 people die prematurely every year in the European Union (EU), 
						the United Kingdom (UK), Norway, Iceland and Liechtenstein due to causes associated with seasonal influenza infection. 
						This represents approximately one in every 1 000 people who are infected. As so many people contract seasonal influenza each year, 
						the virus results in a large number of deaths, despite its relatively low mortality rate. Evidence is still emerging from around the world 
						with relation to the associated mortality for COVID-19, but to date, data suggest that COVID-19 has a higher proportion of cases 
						with severe infection and a higher mortality than seasonal influenza. Some people who have had COVID-19 experience long-term effects, 
						with ongoing respiratory and neurological symptoms. COVID-19 appears to be more transmissible than seasonal influenza, 
						with one infected individual leading to a higher number of secondary infections than is the case for influenza. 
						As SARS-CoV-2 is a new virus, there was no prior immunity, so the entire human population was susceptible to SARS-CoV-2 infection 
						at the start of the pandemic and until very recently there was no vaccine available.
					</p>
					<h3>How does the virus spread?</h3>
					<p>
						SARS-CoV2 is mainly transmitted via respiratory droplets and aerosols from an infected person when they sneeze, cough, speak or breathe and 
						are in close proximity to other people. The virus has also been isolated from the faeces of infected cases, indicating that faecal-oral 
						transmission might also be a route of infection. Droplets can be inhaled or can land on surfaces that others come into contact with and 
						are then infected when they touch their nose, mouth or eyes. The virus can survive on surfaces from anything between a few hours 
						(copper, cardboard) to a number of days (plastic and stainless steel). However, the amount of viable virus declines over time and it may 
						not always be present in sufficient quantities to cause infection.The incubation period for COVID-19 (i.e. the time between 
						exposure to the virus and the onset of symptoms) is currently estimated to be between one and 14 days. We know that the virus 
						can be transmitted when people who are infected show symptoms such as coughing. A person who is infected can also transmit 
						the virus up to two days before they show symptoms; the extent to which such asymptomatic infections contribute to the 
						overall transmission is not currently clear.
					</p>
					<h3>When is a person infectious?</h3>
					<p>
						The infectious period may begin around two days before symptoms appear, but people are most infectious during the symptomatic period,
						even if symptoms are mild and non-specific. The infectious period is estimated to last for eight to 10 days in moderate cases, and up to two weeks on average in severe cases.
					</p>
				</div>
				<p class="footer">COVID-19 information retrieved from <a href="https://www.ecdc.europa.eu/en/covid-19/questions-answers/questions-answers-basic-facts">ecdc.europa</a></h1>
		</div>
	</div>
</body>
<script>
	//Performance testing function
    // window.onload = function() {
	// 	const testStartTime = performance.now();
	// 	getCovidStats();
	// 	const testEndTime = performance.now();
	// 	console.log(`getCovidStats took ${testEndTime - testStartTime} milliseconds to execute.`);
	// }
	
	window.onload = function() {
		getCovidStats();
	}

	function getCovidStats() {
		fetch('https://coronavirus-19-api.herokuapp.com/countries/malta')
		.then(function(resp) { return resp.json() })
		.then(function(data) {
			let country = data.country;
			let cases = data.cases;
			let todayCases = data.todayCases;
			let deaths = data.deaths;
			let deathsToday = data.todayDeaths;
			let recovered = data.recovered;
			let active = data.active;
			let critical = data.critical;
			let totalTests = data.totalTests;

			document.getElementById('country').innerHTML = country;
			document.getElementById('cases').innerHTML = cases.toLocaleString('en');
			document.getElementById('newCases').innerHTML = todayCases.toLocaleString('en');
			document.getElementById('deathsToday').innerHTML = deathsToday.toLocaleString('en');
			document.getElementById('recovered').innerHTML = recovered.toLocaleString('en');
			document.getElementById('active').innerHTML = active.toLocaleString('en');
			document.getElementById('critical').innerHTML = critical.toLocaleString('en');
			document.getElementById('deaths').innerHTML = deaths.toLocaleString('en');
			document.getElementById('tests').innerHTML = totalTests.toLocaleString('en');
		})
		.catch(function(err) {
			console.log(err);
		})
		timer();
	}

	let upgradeTime = 10800; //3 hour
	let seconds = upgradeTime;
		timer = () => {
			let days        = Math.floor(seconds/24/60/60);
			let hoursLeft   = Math.floor((seconds) - (days*86400));
			let hours       = Math.floor(hoursLeft/3600);
			let minutesLeft = Math.floor((hoursLeft) - (hours*3600));
			let minutes     = Math.floor(minutesLeft/60);
			let remainingSeconds = seconds % 60;
			pad = (n) => {
				return (n < 10 ? "0" + n : n);
			}
			document.getElementById('countdown').innerHTML = "<h3> Automatic refresh in " + pad(hours) + ":" + pad(minutes) + ":" + pad(remainingSeconds) + "</h3>";
			if (seconds == 0) {
				clearInterval(countdownTimer);
				document.getElementById('countdown').innerHTML = "Completed";
			} else {
				seconds--;
			}
		}
	let countdownTimer = setInterval('timer()', 1000);
</script>
</html>